{"version":3,"file":"script-f3028ab0.js","sources":["../../script.js"],"sourcesContent":["WA.room.area.onEnter('roof_lowerLeft').subscribe(() => {\n    WA.room.hideLayer('roofs/lowerLeft');\n});\nWA.room.area.onLeave('roof_lowerLeft').subscribe(() => {\n    WA.room.showLayer('roofs/lowerLeft');\n});\n\nWA.room.area.onEnter('roof_lowerRight').subscribe(() => {\n    WA.room.hideLayer('roofs/lowerRight');\n});\nWA.room.area.onLeave('roof_lowerRight').subscribe(() => {\n    WA.room.showLayer('roofs/lowerRight');\n});\n\nWA.room.area.onEnter('roof_upperLeft').subscribe(() => {    \n    WA.room.hideLayer('roofs/upperLeft');\n});\nWA.room.area.onLeave('roof_upperLeft').subscribe(() => {    \n    WA.room.showLayer('roofs/upperLeft');\n});\n\nWA.room.area.onEnter('roof_upperRight').subscribe(() => {    \n    WA.room.hideLayer('roofs/upperRight');\n});\nWA.room.area.onLeave('roof_upperRight').subscribe(() => {    \n    WA.room.showLayer('roofs/upperRight');\n});\n// Define the URL of your webhook\nconst DEFAULT_WEBHOOK_URL = 'https://apps.taskmagic.com/api/v1/webhooks/Wn8CdqSXOlSSMewy6xL60';\n\n// Function to send player data to the webhook\nasync function sendPlayerData(webhookUrl = DEFAULT_WEBHOOK_URL, firstPing = false) {\n    try {\n        await WA.onInit();\n        const playerId = WA.player.id;\n        const playerName = WA.player.name;\n\n        if (!playerId || !playerName) {\n            throw new Error('Invalid player data');\n        }\n\n        // Create the payload\n        const payload = {\n            id: playerId,\n            name: playerName,\n            firstPing: firstPing\n        };\n\n        // Function to handle fetch with timeout\n        const fetchWithTimeout = (url, options, timeout = 5000) => {\n            return Promise.race([\n                fetch(url, options),\n                new Promise((_, reject) =>\n                    setTimeout(() => reject(new Error('Request timed out')), timeout)\n                )\n            ]);\n        };\n\n        // Send the payload to the webhook\n        const response = await fetchWithTimeout(webhookUrl, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(payload)\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const data = await response.json();\n        console.log('Success:', data);\n    } catch (error) {\n        console.error('Error:', error);\n    }\n}\n\n// Call the function to send player data initially with firstPing=true\nsendPlayerData(DEFAULT_WEBHOOK_URL, true);\n\n// Call the function every 60 seconds with firstPing=false\nsetInterval(() => {\n    sendPlayerData(DEFAULT_WEBHOOK_URL, false);\n}, 60000);\n//////\n\n// Function to set outline color based on player tag\nfunction setPlayerOutlineColor(player, tag) {\n    switch (tag) {\n        case \"admins\":\n            player.setOutlineColor(128, 0, 128); // Purple\n            break;\n        case \"teachers\":\n            player.setOutlineColor(0, 0, 255); // Blue\n            break;\n        case \"students\":\n            player.setOutlineColor(255, 255, 0); // Yellow\n            break;\n        default:\n            player.setOutlineColor(0, 0, 0); // Default to black if no tag matches\n    }\n}\n\n// Example usage\nWA.room.onEnter('main').subscribe(() => {\n    WA.player.onEnter().subscribe(function(player) {\n        // Assuming you have a way to get the tag of the player\n        var playerTag = getPlayerTag(player); // Replace with your method to get the tag\n        setPlayerOutlineColor(player, playerTag);\n\n        // If user is admin, name it with a dark blue border\n        if (playerTag === \"admins\") {\n            player.setOutlineColor(27, 42, 65);\n        }\n    });\n});\n\n// Function to get player tag (this is just a placeholder, implement your own logic)\nfunction getPlayerTag(player) {\n    // Example logic to determine the tag\n    if (player.name.includes(\"admin\")) {\n        return \"admins\";\n    } else if (player.name.includes(\"teacher\")) {\n        return \"teachers\";\n    } else {\n        return \"students\";\n    }\n}\n\n// Call the function to send player data initially with firstPing=true\nsendPlayerData(DEFAULT_WEBHOOK_URL, true);\n\n// Call the function every 60 seconds with firstPing=false\nsetInterval(() => {\n    sendPlayerData(DEFAULT_WEBHOOK_URL, false);\n}, 60000);\n"],"names":["DEFAULT_WEBHOOK_URL","sendPlayerData","webhookUrl","firstPing","playerId","playerName","response","url","options","timeout","_","reject","data","error","setPlayerOutlineColor","player","tag","playerTag","getPlayerTag"],"mappings":"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"}